{% extends 'base.html' %}
{% from 'navbar.html' import navbar %}

<style>

  div.suffix {
    width: 60px;
  }

</style>

{% macro decimal_field(field, suffix=None, readonly=False, submit_btn=False) %}
  <div class="form-group {% if field.errors %} error{% endif %}">
    {{ field.label(class="control-label col-sm-2") }}
    <div class="input-group col-sm-4">
      {{ field(class="form-control", readonly=readonly, **kwargs) }}
      {% if suffix %}
        <div class="input-group-addon suffix">{{ suffix }}</div>
      {% endif %}
    </div>

    {% for error in field.errors %}
     <span class="help-inline">{{ error }}</span>
    {% endfor %}

  </div>
{% endmacro %}

{% block navbar %}
  {{ navbar() }}
{% endblock %}

{% block main %}
  {{ form.hidden_tag() }}

  <div class="col-sm-offset-2 col-sm-8">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#collapse-status">
            Status
          </a>
        </h4>
      </div>
      <div id="collapse-status" class="panel-collapse collapse in">
        <div class="panel-body" id="panel-status">
          <div class="form-horizontal">
            {{ decimal_field(form.setpoint, '°C') }}
            {{ decimal_field(form.temp, '°C', readonly=True) }}
            {{ decimal_field(form.power, '%', readonly=True) }}
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}